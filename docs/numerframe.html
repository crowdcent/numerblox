---

title: NumerFrame


keywords: fastai
sidebar: home_sidebar

summary: "Custom data structure for Numerai data. Extends Pandas DataFrame."
description: "Custom data structure for Numerai data. Extends Pandas DataFrame."
nb_path: "nbs/02_numerframe.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/02_numerframe.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Overview:-The-NumerFrame">Overview: The NumerFrame<a class="anchor-link" href="#Overview:-The-NumerFrame"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="/numerbloxnumerframe.html#NumerFrame"><code>NumerFrame</code></a> is a data structure that extends <code>pd.DataFrame</code> with functionality convenient for Numerai users. The main benefits include:</p>
<ol>
<li>Automatically track features, targets, prediction and other columns + easily retrieve these data slices.</li>
<li>Add, export and import metadata. Furthermore, dynamically update or manipulate metadata within your Numerai data pipeline.</li>
<li>Other library functionality automatically recognizes era column (<code>era</code>, <code>friday_date</code> or <code>date</code>).</li>
<li>Integrations with other library components (i.e. <code>preprocessing</code>, <code>model</code>, <code>modelpipeline</code>, <code>postprocessing</code>, <code>evaluation</code> and <code>submission</code>) to create more solid inference pipelines and increase reliability.</li>
</ol>
<p>Besides, all functionality of Pandas DataFrames is still available in the <a href="/numerbloxnumerframe.html#NumerFrame"><code>NumerFrame</code></a>. You therefore don't have to create new pipelines to process your data when using <a href="/numerbloxnumerframe.html#NumerFrame"><code>NumerFrame</code></a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We adopt the convention:</p>
<ol>
<li>All feature column names should start with <code>'feature'</code>.</li>
<li>All target column names should start with <code>'target'</code>.</li>
<li>All prediction column names should start with <code>'prediction'</code>.</li>
<li>Data should contain an <code>'era'</code>, <code>'friday_date'</code> or <code>'date'</code> column, as is almost always the case with Numerai datasets.</li>
</ol>
<p>Every column for which these conditions do not hold will be classified as an <code>'aux'</code> column.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NumerFrame" class="doc_header"><code>class</code> <code>NumerFrame</code><a href="https://github.com/crowdcent/numerblox/tree/master/numerblox/numerframe.py#L19" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>NumerFrame</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <code>DataFrame</code></p>
</blockquote>
<p>Data structure which extends Pandas DataFrames and
allows for additional Numerai specific functionality.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="06726cf3-3619-47bf-afbb-7d553339e79a" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#06726cf3-3619-47bf-afbb-7d553339e79a');

            setTimeout(function() {
                var nbb_cell_id = 5;
                var nbb_unformatted_code = "# export\nclass NumerFrame(pd.DataFrame):\n    \"\"\"\n    Data structure which extends Pandas DataFrames and\n    allows for additional Numerai specific functionality.\n    \"\"\"\n    _metadata = [\"meta\", \"feature_cols\", \"target_cols\",\n                 \"prediction_cols\", \"not_aux_cols\", \"aux_cols\"]\n    meta = AttrDict()\n\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.__init_meta_attrs()\n        if not \"era_col_verified\" in self.meta:\n            self.__set_era_col()\n\n    @property\n    def _constructor(self):\n        return NumerFrame\n\n    def __init_meta_attrs(self):\n        \"\"\" Dynamically track column groups. \"\"\"\n        self.feature_cols = [col for col in self.columns if str(col).startswith(\"feature\")]\n        self.target_cols = [col for col in self.columns if str(col).startswith(\"target\")]\n        self.prediction_cols = [\n            col for col in self.columns if str(col).startswith(\"prediction\")\n        ]\n        self.not_aux_cols = self.feature_cols + self.target_cols + self.prediction_cols\n        self.aux_cols = [\n            col for col in self.columns if col not in self.not_aux_cols\n        ]\n\n    def __set_era_col(self):\n        \"\"\" Each NumerFrame should have an era column to benefit from all functionality. \"\"\"\n        if \"era\" in self.columns:\n            self.meta.era_col = \"era\"\n        elif \"friday_date\" in self.columns:\n            self.meta.era_col = \"friday_date\"\n        elif \"date\" in self.columns:\n            self.meta.era_col = \"date\"\n        else:\n            raise AttributeError(\"NumerFrame must contain either an 'era', 'friday_date' or 'date' column.\")\n        self.meta.era_col_verified = True\n\n    def add_metadata(self, *args, **kwargs):\n        \"\"\" Parse arbitrary metadata (i.e. Python objects) to the meta attribute. \"\"\"\n        self.meta.update(*args, **kwargs)\n\n    def export_json_metadata(self, file=\"config.json\", verbose=False, **kwargs):\n        \"\"\"Export all attributes in NumerFrame that can be serialized to json file.\"\"\"\n        rich_print(f\":file_folder: Exporting metadata to {file} :file_folder:\")\n        json_txt = json.dumps(\n            self.meta.__dict__, default=lambda o: \"<not serializable>\", **kwargs\n        )\n        if verbose:\n            rich_print(json_txt)\n        Path(file).write_text(json_txt)\n\n    def import_json_metadata(self, file=\"config.json\", verbose=False, **kwargs):\n        \"\"\"Load arbitrary data into NumerFrame object from json file.\"\"\"\n        rich_print(f\":file_folder: Importing metadata from {file} :file_folder:\")\n        with open(file) as json_file:\n            json_data = json.load(json_file, **kwargs)\n        if verbose:\n            rich_print(json_data)\n        self.meta.__dict__.update(json_data)\n\n    def get_column_selection(self, cols: Union[str, list]):\n        \"\"\" Return NumerFrame from selection of columns. \"\"\"\n        return self.loc[:, cols if isinstance(cols, list) else [cols]]\n\n    @property\n    def get_feature_data(self):\n        \"\"\" All columns for which name starts with 'target'.\"\"\"\n        return self.get_column_selection(cols=self.feature_cols)\n\n    @property\n    def get_target_data(self):\n        \"\"\" All columns for which name starts with 'target'.\"\"\"\n        return self.get_column_selection(cols=self.target_cols)\n\n    @property\n    def get_single_target_data(self):\n        \"\"\" Column with name 'target' (Main Numerai target column). \"\"\"\n        return self.get_column_selection(cols=['target'])\n\n    @property\n    def get_prediction_data(self):\n        \"\"\" All columns for which name starts with 'prediction'.\"\"\"\n        return self.get_column_selection(cols=self.prediction_cols)\n\n    @property\n    def get_aux_data(self):\n        \"\"\" All columns that are not features, targets or predictions. \"\"\"\n        return self.get_column_selection(cols=self.aux_cols)\n\n    @property\n    def get_prediction_aux_data(self):\n        \"\"\" All predictions columns and aux columns (for ensembling, etc.). \"\"\"\n        return self.get_column_selection(cols=self.prediction_cols+self.aux_cols)\n\n    def get_pattern_data(self, pattern: str):\n        \"\"\"\n        Get columns based on pattern (for example '_20' to get all 20-day Numerai targets).\n        :param pattern: A 'like' pattern (pattern in column_name == True)\n        \"\"\"\n        return self.filter(like=pattern)\n\n    def get_feature_target_pair(self, multi_target=False) -> Tuple[Any, Any]:\n        \"\"\"\n        Get split of feature and target columns.\n        :param multi_target: Returns only 'target' column by default.\n        Returns all target columns when set to True.\n        \"\"\"\n        X = self.get_feature_data\n        y = self.get_target_data if multi_target else self.get_single_target_data\n        return X, y\n\n    def get_era_batch(self, eras: List[Any],\n                      convert_to_tf = False,\n                      aemlp_batch = False,\n                      features: list = None,\n                      targets: list = None,\n                      *args, **kwargs) -> tuple:\n        \"\"\"\n        Get feature target pair batch of 1 or multiple eras. \\n\n        :param eras: Selection of era names that should be present in era_col. \\n\n        :param convert_to_tf: Convert to tf.Tensor. \\n\n        :param aemlp_batch: Specific target batch for autoencoder training. \\n\n        `y` output will contain three components: features, targets and targets. \\n\n        :param features: List of features to select. All by default \\n\n        :param targets: List of targets to select. All by default. \\n\n        *args, **kwargs are passed to initialization of Tensor.\n        \"\"\"\n        valid_eras = []\n        for era in eras:\n            assert era in self[self.meta.era_col].unique(), f\"Era '{era}' not found in era column ({self.meta.era_col})\"\n            valid_eras.append(era)\n        features = features if features else self.feature_cols\n        targets = targets if targets else self.target_cols\n        X = self.loc[self[self.meta.era_col].isin(valid_eras)][features].values\n        y = self.loc[self[self.meta.era_col].isin(valid_eras)][targets].values\n        if aemlp_batch:\n            y = [X.copy(), y.copy(), y.copy()]\n\n        if convert_to_tf:\n            X = tf.convert_to_tensor(X, *args, **kwargs)\n            if aemlp_batch:\n                y = [tf.convert_to_tensor(i, *args, **kwargs) for i in y]\n            else:\n                y = tf.convert_to_tensor(y, *args, **kwargs)\n        return X, y\n\n    def profile_report(self, *args, **kwargs) -> ProfileReport:\n        \"\"\"\n        DataFrame profiling. Might take a while to generate for large datasets.\n        For more info: https://pandas-profiling.github.io/pandas-profiling/docs/master/index.html\n        *args, **kwargs will be passed to ProfileReport initialization.\n        \"\"\"\n        return ProfileReport(self, *args, **kwargs)";
                var nbb_formatted_code = "# export\nclass NumerFrame(pd.DataFrame):\n    \"\"\"\n    Data structure which extends Pandas DataFrames and\n    allows for additional Numerai specific functionality.\n    \"\"\"\n\n    _metadata = [\n        \"meta\",\n        \"feature_cols\",\n        \"target_cols\",\n        \"prediction_cols\",\n        \"not_aux_cols\",\n        \"aux_cols\",\n    ]\n    meta = AttrDict()\n\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.__init_meta_attrs()\n        if not \"era_col_verified\" in self.meta:\n            self.__set_era_col()\n\n    @property\n    def _constructor(self):\n        return NumerFrame\n\n    def __init_meta_attrs(self):\n        \"\"\"Dynamically track column groups.\"\"\"\n        self.feature_cols = [\n            col for col in self.columns if str(col).startswith(\"feature\")\n        ]\n        self.target_cols = [\n            col for col in self.columns if str(col).startswith(\"target\")\n        ]\n        self.prediction_cols = [\n            col for col in self.columns if str(col).startswith(\"prediction\")\n        ]\n        self.not_aux_cols = self.feature_cols + self.target_cols + self.prediction_cols\n        self.aux_cols = [col for col in self.columns if col not in self.not_aux_cols]\n\n    def __set_era_col(self):\n        \"\"\"Each NumerFrame should have an era column to benefit from all functionality.\"\"\"\n        if \"era\" in self.columns:\n            self.meta.era_col = \"era\"\n        elif \"friday_date\" in self.columns:\n            self.meta.era_col = \"friday_date\"\n        elif \"date\" in self.columns:\n            self.meta.era_col = \"date\"\n        else:\n            raise AttributeError(\n                \"NumerFrame must contain either an 'era', 'friday_date' or 'date' column.\"\n            )\n        self.meta.era_col_verified = True\n\n    def add_metadata(self, *args, **kwargs):\n        \"\"\"Parse arbitrary metadata (i.e. Python objects) to the meta attribute.\"\"\"\n        self.meta.update(*args, **kwargs)\n\n    def export_json_metadata(self, file=\"config.json\", verbose=False, **kwargs):\n        \"\"\"Export all attributes in NumerFrame that can be serialized to json file.\"\"\"\n        rich_print(f\":file_folder: Exporting metadata to {file} :file_folder:\")\n        json_txt = json.dumps(\n            self.meta.__dict__, default=lambda o: \"<not serializable>\", **kwargs\n        )\n        if verbose:\n            rich_print(json_txt)\n        Path(file).write_text(json_txt)\n\n    def import_json_metadata(self, file=\"config.json\", verbose=False, **kwargs):\n        \"\"\"Load arbitrary data into NumerFrame object from json file.\"\"\"\n        rich_print(f\":file_folder: Importing metadata from {file} :file_folder:\")\n        with open(file) as json_file:\n            json_data = json.load(json_file, **kwargs)\n        if verbose:\n            rich_print(json_data)\n        self.meta.__dict__.update(json_data)\n\n    def get_column_selection(self, cols: Union[str, list]):\n        \"\"\"Return NumerFrame from selection of columns.\"\"\"\n        return self.loc[:, cols if isinstance(cols, list) else [cols]]\n\n    @property\n    def get_feature_data(self):\n        \"\"\"All columns for which name starts with 'target'.\"\"\"\n        return self.get_column_selection(cols=self.feature_cols)\n\n    @property\n    def get_target_data(self):\n        \"\"\"All columns for which name starts with 'target'.\"\"\"\n        return self.get_column_selection(cols=self.target_cols)\n\n    @property\n    def get_single_target_data(self):\n        \"\"\"Column with name 'target' (Main Numerai target column).\"\"\"\n        return self.get_column_selection(cols=[\"target\"])\n\n    @property\n    def get_prediction_data(self):\n        \"\"\"All columns for which name starts with 'prediction'.\"\"\"\n        return self.get_column_selection(cols=self.prediction_cols)\n\n    @property\n    def get_aux_data(self):\n        \"\"\"All columns that are not features, targets or predictions.\"\"\"\n        return self.get_column_selection(cols=self.aux_cols)\n\n    @property\n    def get_prediction_aux_data(self):\n        \"\"\"All predictions columns and aux columns (for ensembling, etc.).\"\"\"\n        return self.get_column_selection(cols=self.prediction_cols + self.aux_cols)\n\n    def get_pattern_data(self, pattern: str):\n        \"\"\"\n        Get columns based on pattern (for example '_20' to get all 20-day Numerai targets).\n        :param pattern: A 'like' pattern (pattern in column_name == True)\n        \"\"\"\n        return self.filter(like=pattern)\n\n    def get_feature_target_pair(self, multi_target=False) -> Tuple[Any, Any]:\n        \"\"\"\n        Get split of feature and target columns.\n        :param multi_target: Returns only 'target' column by default.\n        Returns all target columns when set to True.\n        \"\"\"\n        X = self.get_feature_data\n        y = self.get_target_data if multi_target else self.get_single_target_data\n        return X, y\n\n    def get_era_batch(\n        self,\n        eras: List[Any],\n        convert_to_tf=False,\n        aemlp_batch=False,\n        features: list = None,\n        targets: list = None,\n        *args,\n        **kwargs,\n    ) -> tuple:\n        \"\"\"\n        Get feature target pair batch of 1 or multiple eras. \\n\n        :param eras: Selection of era names that should be present in era_col. \\n\n        :param convert_to_tf: Convert to tf.Tensor. \\n\n        :param aemlp_batch: Specific target batch for autoencoder training. \\n\n        `y` output will contain three components: features, targets and targets. \\n\n        :param features: List of features to select. All by default \\n\n        :param targets: List of targets to select. All by default. \\n\n        *args, **kwargs are passed to initialization of Tensor.\n        \"\"\"\n        valid_eras = []\n        for era in eras:\n            assert (\n                era in self[self.meta.era_col].unique()\n            ), f\"Era '{era}' not found in era column ({self.meta.era_col})\"\n            valid_eras.append(era)\n        features = features if features else self.feature_cols\n        targets = targets if targets else self.target_cols\n        X = self.loc[self[self.meta.era_col].isin(valid_eras)][features].values\n        y = self.loc[self[self.meta.era_col].isin(valid_eras)][targets].values\n        if aemlp_batch:\n            y = [X.copy(), y.copy(), y.copy()]\n\n        if convert_to_tf:\n            X = tf.convert_to_tensor(X, *args, **kwargs)\n            if aemlp_batch:\n                y = [tf.convert_to_tensor(i, *args, **kwargs) for i in y]\n            else:\n                y = tf.convert_to_tensor(y, *args, **kwargs)\n        return X, y\n\n    def profile_report(self, *args, **kwargs) -> ProfileReport:\n        \"\"\"\n        DataFrame profiling. Might take a while to generate for large datasets.\n        For more info: https://pandas-profiling.github.io/pandas-profiling/docs/master/index.html\n        *args, **kwargs will be passed to ProfileReport initialization.\n        \"\"\"\n        return ProfileReport(self, *args, **kwargs)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="/numerbloxnumerframe.html#create_numerframe"><code>create_numerframe</code></a> automatically recognizes your data file format, loads it into a <a href="/numerbloxnumerframe.html#NumerFrame"><code>NumerFrame</code></a>, allows for column selection before loading and optionally adds metadata.</p>
<p>Support file formats are <code>.csv</code>, <code>.parquet</code>, <code>.pkl</code>, <code>.pickle</code>, <code>.xsl</code>, <code>.xslx</code>, <code>.xlsm</code>, <code>.xlsb</code>, <code>.odf</code>, <code>.ods</code> and <code>.odt</code>. If the file format for your use case is missing, feel free to create a Github issue or submit a pull request. See <code>README.md</code> for more information on contributing.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="create_numerframe" class="doc_header"><code>create_numerframe</code><a href="https://github.com/crowdcent/numerblox/tree/master/numerblox/numerframe.py#L180" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>create_numerframe</code>(<strong><code>file_path</code></strong>:<code>str</code>, <strong><code>metadata</code></strong>:<code>dict</code>=<em><code>None</code></em>, <strong><code>columns</code></strong>:<code>list</code>=<em><code>None</code></em>, <strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>)</p>
</blockquote>
<p>Convenient function to initialize NumerFrame.
Support most used file formats for Pandas DataFrames</p>
<p>(.csv, .parquet, .xls, .pkl, etc.).
For more details check <a href="https://pandas.pydata.org/docs/reference/io.html">https://pandas.pydata.org/docs/reference/io.html</a></p>
<p>:param file_path: Relative or absolute path to data file.</p>
<p>:param metadata: Metadata to be stored in NumerFrame.meta.</p>
<p>:param columns: Which columns to read (All by default).</p>
<p>*args, **kwargs will be passed to Pandas loading function.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="10df0cf2-59cc-4a98-b1f2-7b36ceecb11b" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#10df0cf2-59cc-4a98-b1f2-7b36ceecb11b');

            setTimeout(function() {
                var nbb_cell_id = 6;
                var nbb_unformatted_code = "#export\ndef create_numerframe(file_path: str, metadata: dict = None, columns: list = None, *args, **kwargs) -> NumerFrame:\n    \"\"\"\n    Convenient function to initialize NumerFrame.\n    Support most used file formats for Pandas DataFrames \\n\n    (.csv, .parquet, .xls, .pkl, etc.).\n    For more details check https://pandas.pydata.org/docs/reference/io.html\n\n    :param file_path: Relative or absolute path to data file. \\n\n    :param metadata: Metadata to be stored in NumerFrame.meta. \\n\n    :param columns: Which columns to read (All by default). \\n\n    *args, **kwargs will be passed to Pandas loading function.\n    \"\"\"\n    assert Path(file_path).is_file(), f\"{file_path} does not point to file.\"\n    suffix = Path(file_path).suffix\n    if suffix in [\".csv\"]:\n        df = pd.read_csv(file_path, usecols=columns, *args, **kwargs)\n    elif suffix in [\".parquet\"]:\n        df = pd.read_parquet(file_path, columns=columns, *args, **kwargs)\n    elif suffix in [\".xls\", \".xlsx\", \".xlsm\", \"xlsb\", \".odf\", \".ods\", \".odt\"]:\n        df = pd.read_excel(file_path, usecols=columns, *args, **kwargs)\n    elif suffix in ['.pkl', '.pickle']:\n        df = pd.read_pickle(file_path, *args, **kwargs)\n        df = df.loc[:, columns] if columns else df\n    else:\n        raise NotImplementedError(f\"Suffix '{suffix}' is not supported.\")\n    num_frame = NumerFrame(df)\n    if metadata:\n        num_frame.add_metadata(metadata)\n    return num_frame";
                var nbb_formatted_code = "# export\ndef create_numerframe(\n    file_path: str, metadata: dict = None, columns: list = None, *args, **kwargs\n) -> NumerFrame:\n    \"\"\"\n    Convenient function to initialize NumerFrame.\n    Support most used file formats for Pandas DataFrames \\n\n    (.csv, .parquet, .xls, .pkl, etc.).\n    For more details check https://pandas.pydata.org/docs/reference/io.html\n\n    :param file_path: Relative or absolute path to data file. \\n\n    :param metadata: Metadata to be stored in NumerFrame.meta. \\n\n    :param columns: Which columns to read (All by default). \\n\n    *args, **kwargs will be passed to Pandas loading function.\n    \"\"\"\n    assert Path(file_path).is_file(), f\"{file_path} does not point to file.\"\n    suffix = Path(file_path).suffix\n    if suffix in [\".csv\"]:\n        df = pd.read_csv(file_path, usecols=columns, *args, **kwargs)\n    elif suffix in [\".parquet\"]:\n        df = pd.read_parquet(file_path, columns=columns, *args, **kwargs)\n    elif suffix in [\".xls\", \".xlsx\", \".xlsm\", \"xlsb\", \".odf\", \".ods\", \".odt\"]:\n        df = pd.read_excel(file_path, usecols=columns, *args, **kwargs)\n    elif suffix in [\".pkl\", \".pickle\"]:\n        df = pd.read_pickle(file_path, *args, **kwargs)\n        df = df.loc[:, columns] if columns else df\n    else:\n        raise NotImplementedError(f\"Suffix '{suffix}' is not supported.\")\n    num_frame = NumerFrame(df)\n    if metadata:\n        num_frame.add_metadata(metadata)\n    return num_frame";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="NumerFrame-Usage">NumerFrame Usage<a class="anchor-link" href="#NumerFrame-Usage"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A <a href="/numerbloxnumerframe.html#NumerFrame"><code>NumerFrame</code></a> object can be initialized from memory just like you would with a Pandas DataFrame.
You then have the option to add metadata with <code>.add_metadata</code>. All metadata will be stored in the <code>meta</code> attribute.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.-Initialize-from-memory">1. Initialize from memory<a class="anchor-link" href="#1.-Initialize-from-memory"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_features</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;feature_</span><span class="si">{</span><span class="n">l</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="s2">&quot;ABCDEFGHIK&quot;</span><span class="p">]</span>
<span class="n">id_col</span> <span class="o">=</span> <span class="p">[</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)]</span>

<span class="c1"># Random DataFrame</span>
<span class="n">dataf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="n">test_features</span><span class="p">)</span>
<span class="n">dataf</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">id_col</span>
<span class="n">dataf</span><span class="p">[[</span><span class="s2">&quot;target&quot;</span><span class="p">,</span> <span class="s2">&quot;target_1&quot;</span><span class="p">,</span> <span class="s2">&quot;target_2&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">dataf</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="7167d008-638a-4db6-bde3-f9257514222c" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#7167d008-638a-4db6-bde3-f9257514222c');

            setTimeout(function() {
                var nbb_cell_id = 7;
                var nbb_unformatted_code = "test_features = [f\"feature_{l}\" for l in \"ABCDEFGHIK\"]\nid_col = [uuid.uuid4().hex for _ in range(100)]\n\n# Random DataFrame\ndataf = pd.DataFrame(np.random.uniform(size=(100, 10)), columns=test_features)\ndataf[\"id\"] = id_col\ndataf[[\"target\", \"target_1\", \"target_2\"]] = np.random.normal(size=(100, 3))\ndataf[\"date\"] = range(100)";
                var nbb_formatted_code = "test_features = [f\"feature_{l}\" for l in \"ABCDEFGHIK\"]\nid_col = [uuid.uuid4().hex for _ in range(100)]\n\n# Random DataFrame\ndataf = pd.DataFrame(np.random.uniform(size=(100, 10)), columns=test_features)\ndataf[\"id\"] = id_col\ndataf[[\"target\", \"target_1\", \"target_2\"]] = np.random.normal(size=(100, 3))\ndataf[\"date\"] = range(100)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
    <span class="s2">&quot;additional_info&quot;</span><span class="p">:</span> <span class="s2">&quot;test_model&quot;</span><span class="p">,</span>
    <span class="s2">&quot;multi_target&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;tournament_type&quot;</span><span class="p">:</span> <span class="s2">&quot;random&quot;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">memory_dataf</span> <span class="o">=</span> <span class="n">NumerFrame</span><span class="p">(</span><span class="n">dataf</span><span class="p">)</span>
<span class="n">memory_dataf</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">memory_dataf</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">version</span> <span class="o">==</span> <span class="mi">42</span>
<span class="k">assert</span> <span class="n">memory_dataf</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">tournament_type</span> <span class="o">==</span> <span class="s2">&quot;random&quot;</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="93363532-4292-49ea-ad41-5f5a8a2ed89b" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#93363532-4292-49ea-ad41-5f5a8a2ed89b');

            setTimeout(function() {
                var nbb_cell_id = 8;
                var nbb_unformatted_code = "metadata = {\n    \"version\": 42,\n    \"additional_info\": \"test_model\",\n    \"multi_target\": False,\n    \"tournament_type\": \"random\",\n}\nmemory_dataf = NumerFrame(dataf)\nmemory_dataf.add_metadata(metadata)\nassert memory_dataf.meta.version == 42\nassert memory_dataf.meta.tournament_type == \"random\"";
                var nbb_formatted_code = "metadata = {\n    \"version\": 42,\n    \"additional_info\": \"test_model\",\n    \"multi_target\": False,\n    \"tournament_type\": \"random\",\n}\nmemory_dataf = NumerFrame(dataf)\nmemory_dataf.add_metadata(metadata)\nassert memory_dataf.meta.version == 42\nassert memory_dataf.meta.tournament_type == \"random\"";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Metadata stored in <code>.meta</code> and can be accessed as a dictionary or as attributes.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">memory_dataf</span><span class="o">.</span><span class="n">meta</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;era_col&#39;: &#39;date&#39;,
 &#39;era_col_verified&#39;: True,
 &#39;version&#39;: 42,
 &#39;additional_info&#39;: &#39;test_model&#39;,
 &#39;multi_target&#39;: False,
 &#39;tournament_type&#39;: &#39;random&#39;}</pre>
</div>

</div>

<div class="output_area">




<div id="52ec3754-d2d9-4c9e-b834-754303ce588a" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#52ec3754-d2d9-4c9e-b834-754303ce588a');

            setTimeout(function() {
                var nbb_cell_id = 9;
                var nbb_unformatted_code = "memory_dataf.meta";
                var nbb_formatted_code = "memory_dataf.meta";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">memory_dataf</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">version</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>42</pre>
</div>

</div>

<div class="output_area">




<div id="9e05d000-6939-4e38-9b87-5d35febf85ee" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#9e05d000-6939-4e38-9b87-5d35febf85ee');

            setTimeout(function() {
                var nbb_cell_id = 10;
                var nbb_unformatted_code = "memory_dataf.meta.version";
                var nbb_formatted_code = "memory_dataf.meta.version";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">memory_dataf</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>42</pre>
</div>

</div>

<div class="output_area">




<div id="c94ec367-8d37-42c3-8e30-b117de8c2853" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#c94ec367-8d37-42c3-8e30-b117de8c2853');

            setTimeout(function() {
                var nbb_cell_id = 11;
                var nbb_unformatted_code = "memory_dataf.meta['version']";
                var nbb_formatted_code = "memory_dataf.meta[\"version\"]";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">memory_dataf</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">version</span> <span class="o">==</span> <span class="n">memory_dataf</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s1">&#39;version&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="d550bcb4-7534-402e-898c-3b69e4ece779" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#d550bcb4-7534-402e-898c-3b69e4ece779');

            setTimeout(function() {
                var nbb_cell_id = 12;
                var nbb_unformatted_code = "assert memory_dataf.meta.version == memory_dataf.meta['version']";
                var nbb_formatted_code = "assert memory_dataf.meta.version == memory_dataf.meta[\"version\"]";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.-Initialize-from-file-path">2. Initialize from file path<a class="anchor-link" href="#2.-Initialize-from-file-path"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can also use the convenience function <a href="/numerbloxnumerframe.html#create_numerframe"><code>create_numerframe</code></a> so <a href="/numerbloxnumerframe.html#NumerFrame"><code>NumerFrame</code></a> can be easily initialized. Think of it as a dynamic <code>pd.read_csv</code>, <code>pd.read_parquet</code>, etc. where you can also directly pass metadata.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">metadata</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;multi_target&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
    <span class="s2">&quot;tournament_type&quot;</span><span class="p">:</span> <span class="s2">&quot;classic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;era_col&quot;</span><span class="p">:</span> <span class="s2">&quot;era&quot;</span>
<span class="p">}</span>

<span class="n">num_dataf</span> <span class="o">=</span> <span class="n">create_numerframe</span><span class="p">(</span><span class="s2">&quot;test_assets/mini_numerai_version_2_data.parquet&quot;</span><span class="p">,</span>
                          <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span>
                          <span class="p">)</span>
<span class="k">assert</span> <span class="n">num_dataf</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">version</span> <span class="o">==</span> <span class="mi">2</span>
<span class="k">assert</span> <span class="n">num_dataf</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">era_col</span> <span class="o">==</span> <span class="s2">&quot;era&quot;</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">num_dataf</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">multi_target</span>
<span class="n">num_dataf</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>era</th>
      <th>data_type</th>
      <th>feature_dichasial_hammier_spawner</th>
      <th>feature_rheumy_epistemic_prancer</th>
      <th>feature_pert_performative_hormuz</th>
      <th>feature_hillier_unpitied_theobromine</th>
      <th>feature_perigean_bewitching_thruster</th>
      <th>feature_renegade_undomestic_milord</th>
      <th>feature_koranic_rude_corf</th>
      <th>feature_demisable_expiring_millepede</th>
      <th>...</th>
      <th>target_paul_20</th>
      <th>target_paul_60</th>
      <th>target_george_20</th>
      <th>target_george_60</th>
      <th>target_william_20</th>
      <th>target_william_60</th>
      <th>target_arthur_20</th>
      <th>target_arthur_60</th>
      <th>target_thomas_20</th>
      <th>target_thomas_60</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>n559bd06a8861222</th>
      <td>0297</td>
      <td>train</td>
      <td>0.25</td>
      <td>0.75</td>
      <td>0.25</td>
      <td>0.75</td>
      <td>0.25</td>
      <td>0.50</td>
      <td>1.0</td>
      <td>0.25</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.50</td>
      <td>0.25</td>
      <td>0.5</td>
      <td>0.000000</td>
      <td>0.500000</td>
      <td>0.166667</td>
      <td>0.500000</td>
      <td>0.333333</td>
      <td>0.500000</td>
    </tr>
    <tr>
      <th>n9d39dea58c9e3cf</th>
      <td>0003</td>
      <td>train</td>
      <td>0.75</td>
      <td>0.50</td>
      <td>0.75</td>
      <td>1.00</td>
      <td>0.50</td>
      <td>0.25</td>
      <td>0.5</td>
      <td>0.00</td>
      <td>...</td>
      <td>0.5</td>
      <td>0.75</td>
      <td>0.50</td>
      <td>0.5</td>
      <td>0.666667</td>
      <td>0.666667</td>
      <td>0.500000</td>
      <td>0.666667</td>
      <td>0.500000</td>
      <td>0.666667</td>
    </tr>
  </tbody>
</table>
<p>2 rows Ã— 1073 columns</p>
</div></div>

</div>

<div class="output_area">




<div id="2d7c1cf9-3c22-49e9-b22f-0b1263ae0986" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#2d7c1cf9-3c22-49e9-b22f-0b1263ae0986');

            setTimeout(function() {
                var nbb_cell_id = 13;
                var nbb_unformatted_code = "metadata = {\n    \"version\": 2,\n    \"multi_target\": False,\n    \"tournament_type\": \"classic\",\n    \"era_col\": \"era\"\n}\n\nnum_dataf = create_numerframe(\"test_assets/mini_numerai_version_2_data.parquet\",\n                          metadata=metadata\n                          )\nassert num_dataf.meta.version == 2\nassert num_dataf.meta.era_col == \"era\"\nassert not num_dataf.meta.multi_target\nnum_dataf.head(2)";
                var nbb_formatted_code = "metadata = {\n    \"version\": 2,\n    \"multi_target\": False,\n    \"tournament_type\": \"classic\",\n    \"era_col\": \"era\",\n}\n\nnum_dataf = create_numerframe(\n    \"test_assets/mini_numerai_version_2_data.parquet\", metadata=metadata\n)\nassert num_dataf.meta.version == 2\nassert num_dataf.meta.era_col == \"era\"\nassert not num_dataf.meta.multi_target\nnum_dataf.head(2)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.-Example-functionality">3. Example functionality<a class="anchor-link" href="#3.-Example-functionality"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">meta</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>{&#39;era_col&#39;: &#39;era&#39;,
 &#39;era_col_verified&#39;: True,
 &#39;version&#39;: 2,
 &#39;additional_info&#39;: &#39;test_model&#39;,
 &#39;multi_target&#39;: False,
 &#39;tournament_type&#39;: &#39;classic&#39;}</pre>
</div>

</div>

<div class="output_area">




<div id="f447a056-5328-4426-8d5e-a79ddecf652d" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#f447a056-5328-4426-8d5e-a79ddecf652d');

            setTimeout(function() {
                var nbb_cell_id = 14;
                var nbb_unformatted_code = "num_dataf.meta";
                var nbb_formatted_code = "num_dataf.meta";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>.get_feature_data</code> will retrieve all columns where the column name starts with <code>feature</code>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">get_feature_data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>feature_dichasial_hammier_spawner</th>
      <th>feature_rheumy_epistemic_prancer</th>
      <th>feature_pert_performative_hormuz</th>
      <th>feature_hillier_unpitied_theobromine</th>
      <th>feature_perigean_bewitching_thruster</th>
      <th>feature_renegade_undomestic_milord</th>
      <th>feature_koranic_rude_corf</th>
      <th>feature_demisable_expiring_millepede</th>
      <th>feature_unscheduled_malignant_shingling</th>
      <th>feature_clawed_unwept_adaptability</th>
      <th>...</th>
      <th>feature_unpruned_pedagoguish_inkblot</th>
      <th>feature_forworn_hask_haet</th>
      <th>feature_drawable_exhortative_dispersant</th>
      <th>feature_metabolic_minded_armorist</th>
      <th>feature_investigatory_inerasable_circumvallation</th>
      <th>feature_centroclinal_incentive_lancelet</th>
      <th>feature_unemotional_quietistic_chirper</th>
      <th>feature_behaviorist_microbiological_farina</th>
      <th>feature_lofty_acceptable_challenge</th>
      <th>feature_coactive_prefatorial_lucy</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>n559bd06a8861222</th>
      <td>0.25</td>
      <td>0.75</td>
      <td>0.25</td>
      <td>0.75</td>
      <td>0.25</td>
      <td>0.50</td>
      <td>1.0</td>
      <td>0.25</td>
      <td>0.25</td>
      <td>0.75</td>
      <td>...</td>
      <td>0.75</td>
      <td>0.0</td>
      <td>1.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.25</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>1.00</td>
      <td>0.25</td>
    </tr>
    <tr>
      <th>n9d39dea58c9e3cf</th>
      <td>0.75</td>
      <td>0.50</td>
      <td>0.75</td>
      <td>1.00</td>
      <td>0.50</td>
      <td>0.25</td>
      <td>0.5</td>
      <td>0.00</td>
      <td>1.00</td>
      <td>0.25</td>
      <td>...</td>
      <td>1.00</td>
      <td>1.0</td>
      <td>0.25</td>
      <td>0.5</td>
      <td>0.0</td>
      <td>0.25</td>
      <td>0.75</td>
      <td>1.0</td>
      <td>0.75</td>
      <td>1.00</td>
    </tr>
  </tbody>
</table>
<p>2 rows Ã— 1050 columns</p>
</div></div>

</div>

<div class="output_area">




<div id="9806dbd5-78f0-415f-8d26-466e4d1e3e15" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#9806dbd5-78f0-415f-8d26-466e4d1e3e15');

            setTimeout(function() {
                var nbb_cell_id = 15;
                var nbb_unformatted_code = "num_dataf.get_feature_data.head(2)";
                var nbb_formatted_code = "num_dataf.get_feature_data.head(2)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>.get_target_data</code> retrieves all columns if the column name starts with <code>"target"</code>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">get_target_data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>target</th>
      <th>target_nomi_20</th>
      <th>target_nomi_60</th>
      <th>target_jerome_20</th>
      <th>target_jerome_60</th>
      <th>target_janet_20</th>
      <th>target_janet_60</th>
      <th>target_ben_20</th>
      <th>target_ben_60</th>
      <th>target_alan_20</th>
      <th>...</th>
      <th>target_paul_20</th>
      <th>target_paul_60</th>
      <th>target_george_20</th>
      <th>target_george_60</th>
      <th>target_william_20</th>
      <th>target_william_60</th>
      <th>target_arthur_20</th>
      <th>target_arthur_60</th>
      <th>target_thomas_20</th>
      <th>target_thomas_60</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>n559bd06a8861222</th>
      <td>0.25</td>
      <td>0.25</td>
      <td>0.50</td>
      <td>0.0</td>
      <td>0.50</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>0.25</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.50</td>
      <td>0.25</td>
      <td>0.5</td>
      <td>0.000000</td>
      <td>0.500000</td>
      <td>0.166667</td>
      <td>0.500000</td>
      <td>0.333333</td>
      <td>0.500000</td>
    </tr>
    <tr>
      <th>n9d39dea58c9e3cf</th>
      <td>0.50</td>
      <td>0.50</td>
      <td>0.75</td>
      <td>0.5</td>
      <td>0.75</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>0.50</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>...</td>
      <td>0.5</td>
      <td>0.75</td>
      <td>0.50</td>
      <td>0.5</td>
      <td>0.666667</td>
      <td>0.666667</td>
      <td>0.500000</td>
      <td>0.666667</td>
      <td>0.500000</td>
      <td>0.666667</td>
    </tr>
  </tbody>
</table>
<p>2 rows Ã— 21 columns</p>
</div></div>

</div>

<div class="output_area">




<div id="9c353b1c-53d5-4768-a5d5-1d25ff99390a" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#9c353b1c-53d5-4768-a5d5-1d25ff99390a');

            setTimeout(function() {
                var nbb_cell_id = 16;
                var nbb_unformatted_code = "num_dataf.get_target_data.head(2)";
                var nbb_formatted_code = "num_dataf.get_target_data.head(2)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>.get_single_target_data</code> only retrieves the column <code>"target"</code>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">get_single_target_data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>target</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>n559bd06a8861222</th>
      <td>0.25</td>
    </tr>
    <tr>
      <th>n9d39dea58c9e3cf</th>
      <td>0.50</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

<div class="output_area">




<div id="6b8f941b-0022-4257-a03b-8b8ccb11595f" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#6b8f941b-0022-4257-a03b-8b8ccb11595f');

            setTimeout(function() {
                var nbb_cell_id = 17;
                var nbb_unformatted_code = "num_dataf.get_single_target_data.head(2)";
                var nbb_formatted_code = "num_dataf.get_single_target_data.head(2)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>.get_pattern_data</code> allows you to get columns based on a certain pattern. In this example we retrieve all 20-day targets.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">get_pattern_data</span><span class="p">(</span><span class="s2">&quot;_20&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>target_nomi_20</th>
      <th>target_jerome_20</th>
      <th>target_janet_20</th>
      <th>target_ben_20</th>
      <th>target_alan_20</th>
      <th>target_paul_20</th>
      <th>target_george_20</th>
      <th>target_william_20</th>
      <th>target_arthur_20</th>
      <th>target_thomas_20</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>n559bd06a8861222</th>
      <td>0.25</td>
      <td>0.0</td>
      <td>0.5</td>
      <td>0.25</td>
      <td>0.5</td>
      <td>0.0</td>
      <td>0.25</td>
      <td>0.000000</td>
      <td>0.166667</td>
      <td>0.333333</td>
    </tr>
    <tr>
      <th>n9d39dea58c9e3cf</th>
      <td>0.50</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>0.50</td>
      <td>0.5</td>
      <td>0.5</td>
      <td>0.50</td>
      <td>0.666667</td>
      <td>0.500000</td>
      <td>0.500000</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

<div class="output_area">




<div id="2602b665-ebff-4ad1-bc0f-b985e9bfb547" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#2602b665-ebff-4ad1-bc0f-b985e9bfb547');

            setTimeout(function() {
                var nbb_cell_id = 18;
                var nbb_unformatted_code = "num_dataf.get_pattern_data(\"_20\").head(2)";
                var nbb_formatted_code = "num_dataf.get_pattern_data(\"_20\").head(2)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>.get_era_batch</code> will return a <code>tf.Tensor</code> or <code>np.array</code> with feature data and target data for one or more eras. Convenient for creating neural network DataGenerators.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">X_era</span><span class="p">,</span> <span class="n">y_era</span> <span class="o">=</span> <span class="n">num_dataf</span><span class="o">.</span><span class="n">get_era_batch</span><span class="p">([</span><span class="s1">&#39;0003&#39;</span><span class="p">],</span> <span class="n">convert_to_tf</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">tf</span><span class="o">.</span><span class="n">float16</span><span class="p">)</span>
<span class="n">X_era</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>2022-05-04 14:29:58.563765: I tensorflow/core/platform/cpu_feature_guard.cc:151] This TensorFlow binary is optimized with oneAPI Deep Neural Network Library (oneDNN) to use the following CPU instructions in performance-critical operations:  AVX2 FMA
To enable them in other operations, rebuild TensorFlow with the appropriate compiler flags.
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;tf.Tensor: shape=(1, 1050), dtype=float16, numpy=array([[0.75, 0.5 , 0.75, ..., 1.  , 0.75, 1.  ]], dtype=float16)&gt;</pre>
</div>

</div>

<div class="output_area">




<div id="417d2e10-f317-45fb-aa27-c4ae57dc1e6f" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#417d2e10-f317-45fb-aa27-c4ae57dc1e6f');

            setTimeout(function() {
                var nbb_cell_id = 19;
                var nbb_unformatted_code = "X_era, y_era = num_dataf.get_era_batch(['0003'], convert_to_tf=True, dtype=tf.float16)\nX_era";
                var nbb_formatted_code = "X_era, y_era = num_dataf.get_era_batch([\"0003\"], convert_to_tf=True, dtype=tf.float16)\nX_era";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For people training autoencoders + MLP you can get a target that contains 3 elements: features, targets and targets. Just define <code>aemlp_batch=True</code>.
More info on this setup: <a href="https://forum.numer.ai/t/autoencoder-and-multitask-mlp-on-new-dataset-from-kaggle-jane-street/4338">AutoEncoder and multitask MLP on new dataset forum post</a>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_</span><span class="p">,</span> <span class="n">y_era_aemlp</span> <span class="o">=</span> <span class="n">num_dataf</span><span class="o">.</span><span class="n">get_era_batch</span><span class="p">([</span><span class="s1">&#39;0003&#39;</span><span class="p">],</span> <span class="n">convert_to_tf</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">aemlp_batch</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">tf</span><span class="o">.</span><span class="n">float16</span><span class="p">)</span>
<span class="n">y_era_aemlp</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&lt;tf.Tensor: shape=(1, 1050), dtype=float16, numpy=array([[0.75, 0.5 , 0.75, ..., 1.  , 0.75, 1.  ]], dtype=float16)&gt;,
 &lt;tf.Tensor: shape=(1, 21), dtype=float16, numpy=
 array([[0.5   , 0.5   , 0.75  , 0.5   , 0.75  , 0.5   , 0.5   , 0.5   ,
         0.5   , 0.5   , 0.5   , 0.5   , 0.75  , 0.5   , 0.5   , 0.6665,
         0.6665, 0.5   , 0.6665, 0.5   , 0.6665]], dtype=float16)&gt;,
 &lt;tf.Tensor: shape=(1, 21), dtype=float16, numpy=
 array([[0.5   , 0.5   , 0.75  , 0.5   , 0.75  , 0.5   , 0.5   , 0.5   ,
         0.5   , 0.5   , 0.5   , 0.5   , 0.75  , 0.5   , 0.5   , 0.6665,
         0.6665, 0.5   , 0.6665, 0.5   , 0.6665]], dtype=float16)&gt;]</pre>
</div>

</div>

<div class="output_area">




<div id="7328e3f3-419f-4ce3-9f3e-d338f385a22a" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#7328e3f3-419f-4ce3-9f3e-d338f385a22a');

            setTimeout(function() {
                var nbb_cell_id = 20;
                var nbb_unformatted_code = "_, y_era_aemlp = num_dataf.get_era_batch(['0003'], convert_to_tf=True, aemlp_batch=True, dtype=tf.float16)\ny_era_aemlp";
                var nbb_formatted_code = "_, y_era_aemlp = num_dataf.get_era_batch(\n    [\"0003\"], convert_to_tf=True, aemlp_batch=True, dtype=tf.float16\n)\ny_era_aemlp";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>.aux_cols</code> denotes all columns that are not features, targets or prediction columns.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">aux_cols</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;era&#39;, &#39;data_type&#39;]</pre>
</div>

</div>

<div class="output_area">




<div id="cab7d825-7cb4-4a0f-9e30-856afcbaea17" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#cab7d825-7cb4-4a0f-9e30-856afcbaea17');

            setTimeout(function() {
                var nbb_cell_id = 21;
                var nbb_unformatted_code = "num_dataf.aux_cols";
                var nbb_formatted_code = "num_dataf.aux_cols";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">get_aux_data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>era</th>
      <th>data_type</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>n559bd06a8861222</th>
      <td>0297</td>
      <td>train</td>
    </tr>
    <tr>
      <th>n9d39dea58c9e3cf</th>
      <td>0003</td>
      <td>train</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

<div class="output_area">




<div id="98dd5431-89e7-40f5-8fc5-c9856abe0335" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#98dd5431-89e7-40f5-8fc5-c9856abe0335');

            setTimeout(function() {
                var nbb_cell_id = 22;
                var nbb_unformatted_code = "num_dataf.get_aux_data.head(2)";
                var nbb_formatted_code = "num_dataf.get_aux_data.head(2)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="p">[</span><span class="s1">&#39;prediction_1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">num_dataf</span><span class="p">))</span>
<span class="n">num_dataf</span><span class="p">[</span><span class="s1">&#39;prediction_2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">num_dataf</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="fa5aa091-3ac3-48f8-9d71-5f755e5a155b" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#fa5aa091-3ac3-48f8-9d71-5f755e5a155b');

            setTimeout(function() {
                var nbb_cell_id = 23;
                var nbb_unformatted_code = "num_dataf['prediction_1'] = np.random.uniform(size=len(num_dataf))\nnum_dataf['prediction_2'] = np.random.uniform(size=len(num_dataf))";
                var nbb_formatted_code = "num_dataf[\"prediction_1\"] = np.random.uniform(size=len(num_dataf))\nnum_dataf[\"prediction_2\"] = np.random.uniform(size=len(num_dataf))";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To track new columns like prediction columns, make sure to initialize a new <a href="/numerbloxnumerframe.html#NumerFrame"><code>NumerFrame</code></a>. Prediction columns can easily be retrieved with <code>.get_prediction_data</code> and <code>get_prediction_aux_data</code> if you want to also get columns like <code>era</code> and <code>data_type</code>. This can be handy for ensembling and submission use cases.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span> <span class="o">=</span> <span class="n">NumerFrame</span><span class="p">(</span><span class="n">num_dataf</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="6341fd8d-ea1a-4121-a378-fe1019bfbb9e" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#6341fd8d-ea1a-4121-a378-fe1019bfbb9e');

            setTimeout(function() {
                var nbb_cell_id = 24;
                var nbb_unformatted_code = "num_dataf = NumerFrame(num_dataf)";
                var nbb_formatted_code = "num_dataf = NumerFrame(num_dataf)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">get_prediction_data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>prediction_1</th>
      <th>prediction_2</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>n559bd06a8861222</th>
      <td>0.310963</td>
      <td>0.430789</td>
    </tr>
    <tr>
      <th>n9d39dea58c9e3cf</th>
      <td>0.108284</td>
      <td>0.963414</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

<div class="output_area">




<div id="54d96322-ad47-4801-a491-3aeeeb692a9a" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#54d96322-ad47-4801-a491-3aeeeb692a9a');

            setTimeout(function() {
                var nbb_cell_id = 25;
                var nbb_unformatted_code = "num_dataf.get_prediction_data.head(2)";
                var nbb_formatted_code = "num_dataf.get_prediction_data.head(2)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">get_prediction_aux_data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>prediction_1</th>
      <th>prediction_2</th>
      <th>era</th>
      <th>data_type</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>n559bd06a8861222</th>
      <td>0.310963</td>
      <td>0.430789</td>
      <td>0297</td>
      <td>train</td>
    </tr>
    <tr>
      <th>n9d39dea58c9e3cf</th>
      <td>0.108284</td>
      <td>0.963414</td>
      <td>0003</td>
      <td>train</td>
    </tr>
  </tbody>
</table>
</div></div>

</div>

<div class="output_area">




<div id="39a00a9c-9635-4cff-ac44-44efe57abe64" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#39a00a9c-9635-4cff-ac44-44efe57abe64');

            setTimeout(function() {
                var nbb_cell_id = 26;
                var nbb_unformatted_code = "num_dataf.get_prediction_aux_data.head(2)";
                var nbb_formatted_code = "num_dataf.get_prediction_aux_data.head(2)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Arbitrary <code>.json</code> metadata can be stored into the <a href="/numerbloxnumerframe.html#NumerFrame"><code>NumerFrame</code></a>. All metadata can also be exported to a <code>.json</code> file.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">export_json_metadata</span><span class="p">(</span><span class="s2">&quot;config.json&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea "><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">ðŸ“ Exporting metadata to config.json ðŸ“
</pre>
</div>

</div>

<div class="output_area">




<div id="394f840d-aea9-4218-b52f-5eb2d8d6e08b" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#394f840d-aea9-4218-b52f-5eb2d8d6e08b');

            setTimeout(function() {
                var nbb_cell_id = 27;
                var nbb_unformatted_code = "num_dataf.export_json_metadata(\"config.json\")";
                var nbb_formatted_code = "num_dataf.export_json_metadata(\"config.json\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">import_json_metadata</span><span class="p">(</span><span class="s2">&quot;config.json&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea "><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">ðŸ“ Importing metadata from config.json ðŸ“
</pre>
</div>

</div>

<div class="output_area">




<div id="9239301c-62c0-4d78-aa52-e881efdebaf6" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#9239301c-62c0-4d78-aa52-e881efdebaf6');

            setTimeout(function() {
                var nbb_cell_id = 28;
                var nbb_unformatted_code = "num_dataf.import_json_metadata(\"config.json\")";
                var nbb_formatted_code = "num_dataf.import_json_metadata(\"config.json\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">num_dataf</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">version</span> <span class="o">==</span> <span class="mi">2</span>
<span class="k">assert</span> <span class="ow">not</span> <span class="n">num_dataf</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">multi_target</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="b067143e-2d20-43bd-adfa-989a77b6ee03" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#b067143e-2d20-43bd-adfa-989a77b6ee03');

            setTimeout(function() {
                var nbb_cell_id = 29;
                var nbb_unformatted_code = "assert num_dataf.meta.version == 2\nassert not num_dataf.meta.multi_target";
                var nbb_formatted_code = "assert num_dataf.meta.version == 2\nassert not num_dataf.meta.multi_target";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Because <a href="/numerbloxnumerframe.html#NumerFrame"><code>NumerFrame</code></a> inherits from <code>pd.DataFrame</code> you still have all functionality of a normal DataFrame at your disposal, like copying.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataf2</span> <span class="o">=</span> <span class="n">num_dataf</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">dataf2</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">num_dataf</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="a1e9adf0-58ad-4a21-a841-1c7d713bea33" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#a1e9adf0-58ad-4a21-a841-1c7d713bea33');

            setTimeout(function() {
                var nbb_cell_id = 30;
                var nbb_unformatted_code = "dataf2 = num_dataf.copy()\nassert dataf2.equals(num_dataf)";
                var nbb_formatted_code = "dataf2 = num_dataf.copy()\nassert dataf2.equals(num_dataf)";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="/numerbloxnumerframe.html#NumerFrame"><code>NumerFrame</code></a> dynamically tracks which feature, target, aux and prediction columns there are when initialized. For example, here we add a new prediction column. Upon initialization the column will be contained in <code>prediction_cols</code>. Prediction columns are all column names that start with <code>prediction</code>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">num_dataf</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;prediction_test_1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">num_dataf</span><span class="p">))</span>
<span class="n">new_dataset</span> <span class="o">=</span> <span class="n">NumerFrame</span><span class="p">(</span><span class="n">num_dataf</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">new_dataset</span><span class="o">.</span><span class="n">prediction_cols</span> <span class="o">==</span> <span class="p">[</span><span class="s2">&quot;prediction_test_1&quot;</span><span class="p">]</span>
<span class="k">assert</span> <span class="n">new_dataset</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">version</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AssertionError</span>                            Traceback (most recent call last)
<span class="ansi-green-fg">/var/folders/d5/1qd2ftjn7ts_5_k6w2k2g4c00000gn/T/ipykernel_4510/1848050200.py</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> num_dataf<span class="ansi-blue-fg">.</span>loc<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">:</span><span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">&#34;prediction_test_1&#34;</span><span class="ansi-blue-fg">]</span> <span class="ansi-blue-fg">=</span> np<span class="ansi-blue-fg">.</span>random<span class="ansi-blue-fg">.</span>uniform<span class="ansi-blue-fg">(</span>size<span class="ansi-blue-fg">=</span>len<span class="ansi-blue-fg">(</span>num_dataf<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> new_dataset <span class="ansi-blue-fg">=</span> NumerFrame<span class="ansi-blue-fg">(</span>num_dataf<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">----&gt; 3</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">assert</span> new_dataset<span class="ansi-blue-fg">.</span>prediction_cols <span class="ansi-blue-fg">==</span> <span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#34;prediction_test_1&#34;</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span> <span class="ansi-green-fg">assert</span> new_dataset<span class="ansi-blue-fg">.</span>meta<span class="ansi-blue-fg">.</span>version <span class="ansi-blue-fg">==</span> <span class="ansi-cyan-fg">2</span>

<span class="ansi-red-fg">AssertionError</span>: </pre>
</div>
</div>

<div class="output_area">




<div id="3e5843a7-e07c-4412-b9e5-71081fbe9e85" class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#3e5843a7-e07c-4412-b9e5-71081fbe9e85');

            setTimeout(function() {
                var nbb_cell_id = 31;
                var nbb_unformatted_code = "num_dataf.loc[:, \"prediction_test_1\"] = np.random.uniform(size=len(num_dataf))\nnew_dataset = NumerFrame(num_dataf)\nassert new_dataset.prediction_cols == [\"prediction_test_1\"]\nassert new_dataset.meta.version == 2";
                var nbb_formatted_code = "num_dataf.loc[:, \"prediction_test_1\"] = np.random.uniform(size=len(num_dataf))\nnew_dataset = NumerFrame(num_dataf)\nassert new_dataset.prediction_cols == [\"prediction_test_1\"]\nassert new_dataset.meta.version == 2";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Arbitrary columns van be retrieved with <code>.get_column_selection</code>. The input argument can be either a string or a list with column names.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">selection1</span> <span class="o">=</span> <span class="n">num_dataf</span><span class="o">.</span><span class="n">get_column_selection</span><span class="p">(</span><span class="s2">&quot;era&quot;</span><span class="p">)</span>
<span class="n">selection1</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">selection2</span> <span class="o">=</span> <span class="n">num_dataf</span><span class="o">.</span><span class="n">get_column_selection</span><span class="p">([</span><span class="s2">&quot;era&quot;</span><span class="p">,</span> <span class="s2">&quot;prediction_test_1&quot;</span><span class="p">])</span>
<span class="n">selection2</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For convenience we can get a feature, target pair with one method. If <code>multi_target=True</code> all columns where the column name starts with <code>target</code> will be retrieved.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">features</span><span class="p">,</span> <span class="n">single_target</span> <span class="o">=</span> <span class="n">num_dataf</span><span class="o">.</span><span class="n">get_feature_target_pair</span><span class="p">(</span><span class="n">multi_target</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">features</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">single_target</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can directly generate a <a href="https://pandas-profiling.github.io/pandas-profiling/docs/master/index.html">pandas-profiling</a> report from a <a href="/numerbloxnumerframe.html#NumerFrame"><code>NumerFrame</code></a>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">report</span> <span class="o">=</span> <span class="n">memory_dataf</span><span class="o">.</span><span class="n">profile_report</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Mini Numerai V1 report&quot;</span><span class="p">,</span> <span class="n">explorative</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">report</span><span class="p">,</span> <span class="n">ProfileReport</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
</div>


